<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="theme-color" content="#1a0033">
    <link rel="preload" href="assets/gems/red1.png" as="image">
    <link rel="preload" href="assets/gems/red2.png" as="image">
    <link rel="preload" href="assets/gems/orange1.png" as="image">
    <link rel="preload" href="assets/gems/orange2.png" as="image">
    <link rel="preload" href="assets/gems/green1.png" as="image">
    <link rel="preload" href="assets/gems/green2.png" as="image">
    <link rel="preload" href="assets/gems/spark1.png" as="image">
    <link rel="preload" href="assets/gems/spark2.png" as="image">
    <title>Greeting for Gem Christian</title>
    <style>
        :root {
            --primary-color: #ff66b3;
            --secondary-color: #ff85d8;
            --dark-accent: #66004d;
            --darker-accent: #1a0033;
            --light-text: #ffd6f4;
            --pixel-size: 8px;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            margin: 0;
            min-height: 100vh;
            background-color: var(--darker-accent);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-family: 'Press Start 2P', cursive;
            overflow: hidden;
            position: relative;
            image-rendering: pixelated;
            touch-action: manipulation;
            padding: 15px;
            color: var(--light-text);
        }

        @font-face {
            font-family: 'Press Start 2P';
            src: url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
        }

        /* Main content container */
        .content-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            max-width: 800px;
            position: relative;
            z-index: 10;
            gap: 15px;
        }

        /* Pixel Border */
        .pixel-border {
            position: fixed;
            pointer-events: none;
            z-index: 1;
        }

        .pixel-border-top,
        .pixel-border-bottom {
            width: 100%;
            height: var(--pixel-size);
            background: repeating-linear-gradient(to right,
                    var(--primary-color),
                    var(--primary-color) var(--pixel-size),
                    transparent var(--pixel-size),
                    transparent calc(var(--pixel-size) * 2));
        }

        .pixel-border-left,
        .pixel-border-right {
            height: 100%;
            width: var(--pixel-size);
            background: repeating-linear-gradient(to bottom,
                    var(--primary-color),
                    var(--primary-color) var(--pixel-size),
                    transparent var(--pixel-size),
                    transparent calc(var(--pixel-size) * 2));
        }

        .pixel-border-top {
            top: 0;
            left: 0;
        }

        .pixel-border-bottom {
            bottom: 0;
            left: 0;
        }

        .pixel-border-left {
            top: 0;
            left: 0;
        }

        .pixel-border-right {
            top: 0;
            right: 0;
        }

        .pixel-waves {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            opacity: 0.3;
            background-image:
                linear-gradient(to right,
                    transparent 0%,
                    var(--primary-color) 20%,
                    transparent 40%,
                    var(--secondary-color) 60%,
                    transparent 80%,
                    var(--primary-color) 100%);
            background-size: 200% 100%;
            animation: waveMove 8s linear infinite;
            image-rendering: pixelated;
        }

        .pixel-waves.static {
            animation: none;
        }

        @keyframes waveMove {
            0% {
                background-position: 0 0;
            }

            100% {
                background-position: -200% 0;
            }
        }

        /* Pixel Grid Pattern */
        .pixel-grid {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                linear-gradient(rgba(255, 102, 179, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 102, 179, 0.05) 1px, transparent 1px);
            background-size: var(--pixel-size) var(--pixel-size);
            z-index: -1;
            pointer-events: none;
        }

        /* Birthday specific styles */
        .cake-icon {
            font-size: clamp(40px, 15vw, 80px);
            margin-bottom: clamp(8px, 3vw, 20px);
            text-shadow: 0 6px 0 var(--dark-accent);
            position: relative;
            z-index: 10;
            animation:
                bounce 2s infinite ease-in-out,
                candleFlicker 0.5s infinite alternate;
            will-change: transform, text-shadow;
        }

        @keyframes candleFlicker {

            0%,
            100% {
                text-shadow:
                    0 6px 0 var(--dark-accent),
                    0 -10px 10px #ff3333,
                    0 -15px 15px #ff9933;
            }

            50% {
                text-shadow:
                    0 6px 0 var(--dark-accent),
                    0 -8px 8px #ff6666,
                    0 -12px 12px #ffcc66;
            }
        }

        @keyframes bounce {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-12px);
            }
        }

        .birthday-title {
            color: var(--secondary-color);
            font-size: clamp(14px, 5vw, 28px);
            text-shadow: 0 4px 0 var(--dark-accent);
            margin-bottom: clamp(8px, 3vw, 20px);
            text-align: center;
            line-height: 1.4;
            position: relative;
            z-index: 10;
            padding: 0 10px;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .birthday-title span {
            display: block;
        }

        /* Game Button */
        .game-button {
            position: relative;
            width: clamp(160px, 60vw, 200px);
            height: clamp(60px, 15vw, 80px);
            background: var(--dark-accent);
            border: 4px solid var(--primary-color);
            color: var(--light-text);
            font-family: 'Press Start 2P', cursive;
            font-size: clamp(10px, 3vw, 14px);
            cursor: pointer;
            text-shadow: 0 2px 0 var(--dark-accent);
            box-shadow:
                4px 4px 0 rgba(0, 0, 0, 0.3),
                inset 0 0 0 2px var(--dark-accent);
            transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 10;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            line-height: 1.4;
            padding: 0 10px;
            transform: translate(0, 0);
            outline: none;
            min-height: 60px;
        }

        .game-button:hover {
            background: var(--primary-color);
            transform: translate(2px, 2px);
            box-shadow:
                2px 2px 0 rgba(0, 0, 0, 0.3),
                inset 0 0 0 2px var(--dark-accent);
        }

        .game-button:active {
            transform: translate(4px, 4px);
            box-shadow:
                0px 0px 0 rgba(0, 0, 0, 0.3),
                inset 0 0 0 2px var(--dark-accent);
            transition: all 0.1s ease-out;
        }

        .game-button::before {
            content: "";
            position: absolute;
            top: -8px;
            left: -8px;
            right: -8px;
            bottom: -8px;
            border: 2px solid var(--secondary-color);
            z-index: -1;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .game-button:hover::before {
            opacity: 0.7;
        }

        /* Improved Game Notification Modal - No Scrolling */
        .game-notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.5);
            width: min(90vw, 420px);
            max-height: 80vh;
            overflow: hidden;
            background: linear-gradient(135deg, var(--dark-accent) 0%, #330033 100%);
            border: 8px solid transparent;
            border-image: linear-gradient(45deg, var(--primary-color), var(--secondary-color)) 1;
            padding: min(4vw, 24px);
            box-shadow:
                0 0 0 4px var(--dark-accent),
                0 0 30px rgba(255, 102, 179, 0.5),
                0 10px 40px rgba(0, 0, 0, 0.5);
            z-index: 100;
            opacity: 0;
            pointer-events: none;
            transform-origin: center;
            transition:
                opacity 0.3s ease-out,
                transform 0.5s cubic-bezier(0.68, -0.6, 0.32, 1.6);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
        }

        .game-notification.active {
            opacity: 1;
            pointer-events: all;
            transform: translate(-50%, -50%) scale(1);
            animation: modalBounce 0.8s cubic-bezier(0.68, -0.6, 0.32, 1.6);
        }

        @keyframes modalBounce {
            0% {
                transform: translate(-50%, -50%) scale(0.5);
            }

            50% {
                transform: translate(-50%, -50%) scale(1.1);
            }

            70% {
                transform: translate(-50%, -50%) scale(0.95);
            }

            100% {
                transform: translate(-50%, -50%) scale(1);
            }
        }

        .notification-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: clamp(12px, 3vw, 20px);
            padding-bottom: clamp(8px, 2vw, 12px);
            border-bottom: 2px solid var(--primary-color);
            position: relative;
            flex-shrink: 0;
        }

        .notification-header::after {
            content: "";
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg,
                    transparent 0%,
                    var(--secondary-color) 20%,
                    var(--primary-color) 50%,
                    var(--secondary-color) 80%,
                    transparent 100%);
        }

        .notification-title {
            color: var(--secondary-color);
            font-size: clamp(16px, 5vw, 24px);
            text-shadow:
                0 2px 0 var(--dark-accent),
                0 0 10px rgba(255, 133, 216, 0.5);
            margin: 0;
            position: relative;
            padding-left: 12px;
        }

        .notification-title::before {
            content: "";
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 4px;
            height: 80%;
            background: linear-gradient(to bottom, var(--primary-color), var(--secondary-color));
            border-radius: 2px;
        }

        .notification-icon {
            width: clamp(36px, 10vw, 48px);
            height: clamp(36px, 10vw, 48px);
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            border: 3px solid var(--light-text);
            box-shadow:
                0 0 0 3px var(--dark-accent),
                0 4px 8px rgba(0, 0, 0, 0.3);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: clamp(18px, 5vw, 24px);
            border-radius: 50%;
            animation: pulse 2s infinite;
            flex-shrink: 0;
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.1);
            }

            100% {
                transform: scale(1);
            }
        }

        .notification-main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            min-height: 0;
            gap: 12px;
        }

        .notification-content {
            color: var(--light-text);
            font-size: clamp(12px, 3.5vw, 16px);
            line-height: 1.5;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
            word-break: break-word;
            hyphens: auto;
            padding: clamp(8px, 2vw, 12px);
            background: rgba(26, 0, 51, 0.5);
            border-radius: 4px;
            border-left: 3px solid var(--primary-color);
            position: relative;
            flex: 1;
            min-height: 100px;
        }

        .scrollable-content {
            flex: 1;
            overflow-y: auto;
            padding-bottom: 20px;
            /* Ensures space at bottom of scroll area */
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .notification-content-wrapper {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            gap: 12px;
        }

        .notification-content::before {
            content: "";
            position: absolute;
            top: 8px;
            left: 8px;
            font-size: 24px;
            color: var(--primary-color);
            opacity: 0.3;
            font-family: serif;
        }

        .notification-content::after {
            content: "";
            position: absolute;
            bottom: 8px;
            right: 8px;
            font-size: 24px;
            color: var(--primary-color);
            opacity: 0.3;
            font-family: serif;
        }

        .progress-display {
            color: var(--secondary-color);
            font-size: clamp(12px, 3vw, 14px);
            text-align: center;
            margin-bottom: clamp(8px, 2vw, 12px);
            text-shadow: 0 2px 0 var(--dark-accent);
            position: relative;
            padding: 4px 0;
            flex-shrink: 0;
        }

        .progress-display::before {
            content: "";
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80%;
            height: 100%;
            border-top: 1px dashed var(--primary-color);
            border-bottom: 1px dashed var(--primary-color);
            opacity: 0.3;
        }

        .celebrant-image-container {
            width: 100%;
            display: none;
            justify-content: center;
            margin: clamp(8px, 2vw, 12px) 0;
            flex-shrink: 0;
            max-height: 30vh;
        }

        .celebrant-image {
            width: auto;
            height: 100%;
            max-width: 100%;
            max-height: 30vh;
            object-fit: contain;
            border: 6px solid transparent;
            border-image: linear-gradient(45deg, var(--primary-color), var(--secondary-color)) 1;
            box-shadow:
                0 0 20px rgba(255, 102, 179, 0.5),
                0 10px 30px rgba(0, 0, 0, 0.5);
            image-rendering: pixelated;
            filter: contrast(1.1) brightness(1.05) saturate(1.1);
            border-radius: 4px;
        }

        .game-notification.has-image .notification-content {
            margin-bottom: 10px;
        }

        .notification-buttons {
            display: flex;
            justify-content: center;
            gap: clamp(8px, 2vw, 12px);
            flex-wrap: wrap;
            margin-top: auto;
            padding-top: 12px;
            flex-shrink: 0;
            position: sticky;
            bottom: 0;
            background: linear-gradient(135deg, var(--dark-accent) 0%, #330033 100%);
            z-index: 2;
            padding-bottom: 8px;
        }

        .notification-btn {
            padding: clamp(8px, 2vw, 12px) clamp(12px, 3vw, 20px);
            background: linear-gradient(to bottom, var(--dark-accent) 0%, #330033 100%);
            color: var(--light-text);
            border: 2px solid var(--primary-color);
            font-family: 'Press Start 2P', cursive;
            font-size: clamp(10px, 3vw, 14px);
            cursor: pointer;
            text-shadow: 0 2px 0 var(--dark-accent);
            box-shadow:
                0 4px 0 rgba(0, 0, 0, 0.3),
                inset 0 0 0 2px var(--dark-accent);
            transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            flex: 1 0 auto;
            max-width: 140px;
            display: flex;
            justify-content: center;
            align-items: center;
            height: clamp(40px, 10vw, 50px);
            line-height: 1.2;
            min-width: 100px;
            min-height: 40px;
            border-radius: 4px;
            position: relative;
            overflow: hidden;
        }

        .notification-btn::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(to bottom right,
                    rgba(255, 255, 255, 0) 0%,
                    rgba(255, 255, 255, 0.1) 50%,
                    rgba(255, 255, 255, 0) 100%);
            transform: rotate(30deg);
            transition: all 0.3s;
        }

        .notification-btn:hover {
            background: linear-gradient(to bottom, var(--primary-color) 0%, #cc0066 100%);
            transform: translate(0, -2px);
            box-shadow:
                0 6px 0 rgba(0, 0, 0, 0.3),
                inset 0 0 0 2px var(--dark-accent);
        }

        .notification-btn:hover::before {
            left: 100%;
        }

        .notification-btn:active {
            transform: translate(0, 2px);
            box-shadow:
                0 2px 0 rgba(0, 0, 0, 0.3),
                inset 0 0 0 2px var(--dark-accent);
        }

        .btn-accent {
            background: linear-gradient(to bottom, var(--primary-color) 0%, var(--secondary-color) 100%);
            border-color: var(--light-text);
            color: var(--darker-accent);
            text-shadow: 0 1px 0 rgba(255, 255, 255, 0.3);
        }

        .btn-next {
            background: linear-gradient(to bottom, #00cc66 0%, #009955 100%);
            border-color: #00ff88;
            color: white;
        }

        /* Game UI Elements */
        .game-ui {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .health-container {
            position: absolute;
            top: clamp(10px, 3vw, 20px);
            left: clamp(10px, 3vw, 20px);
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .health-bar {
            width: clamp(100px, 35vw, 180px);
            height: clamp(16px, 4vw, 24px);
            background: var(--dark-accent);
            border: 3px solid var(--primary-color);
            box-shadow:
                inset 0 0 0 3px var(--dark-accent),
                6px 6px 0 rgba(0, 0, 0, 0.3);
        }

        .health-fill {
            height: 100%;
            background: linear-gradient(to right, #00ff88, #00ccff);
            transition: width 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
            width: 0%;
        }

        .health-fill::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg,
                    rgba(255, 255, 255, 0.1) 0%,
                    rgba(255, 255, 255, 0.3) 50%,
                    rgba(255, 255, 255, 0.1) 100%);
            animation: shine 2s infinite;
        }

        @keyframes shine {
            0% {
                transform: translateX(-100%);
            }

            100% {
                transform: translateX(100%);
            }
        }

        .health-label {
            color: var(--light-text);
            font-size: clamp(10px, 2.5vw, 12px);
            text-shadow: 0 2px 0 var(--dark-accent);
            text-align: center;
        }

        .score-display {
            position: absolute;
            top: clamp(10px, 3vw, 20px);
            right: clamp(10px, 3vw, 20px);
            color: var(--light-text);
            font-size: clamp(12px, 3.5vw, 16px);
            text-shadow: 0 3px 0 var(--dark-accent);
            padding: 4px 8px;
            background: rgba(102, 0, 77, 0.7);
            border: 2px solid var(--primary-color);
            border-radius: 4px;
            white-space: nowrap;
        }

        .level-display {
            position: absolute;
            top: clamp(60px, 20vw, 80px);
            left: clamp(10px, 3vw, 20px);
            color: var(--light-text);
            font-size: clamp(12px, 3.5vw, 16px);
            text-shadow: 0 3px 0 var(--dark-accent);
            padding: 4px 8px;
            background: rgba(102, 0, 77, 0.7);
            border: 2px solid var(--primary-color);
            border-radius: 4px;
            white-space: nowrap;
        }

        /* Achievement Badge */
        .achievement-badge {
            position: fixed;
            top: clamp(10px, 2vw, 20px);
            right: -10px;
            width: clamp(200px, 55vw, 260px);
            height: clamp(50px, 12vw, 60px);
            background: var(--dark-accent);
            border: 3px solid var(--primary-color);
            display: flex;
            align-items: center;
            padding: clamp(5px, 1.5vw, 8px) clamp(8px, 2vw, 12px);
            box-shadow:
                6px 6px 0 rgba(0, 0, 0, 0.3),
                inset 0 0 0 3px var(--dark-accent);
            z-index: 50;
            transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transform: translateX(100%);
        }

        .achievement-badge.active {
            transform: translateX(0);
            right: 10px;
        }

        .badge-icon {
            width: clamp(32px, 8vw, 40px);
            height: clamp(32px, 8vw, 40px);
            background-color: var(--primary-color);
            border: 3px solid var(--secondary-color);
            margin-right: clamp(8px, 2vw, 12px);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: clamp(16px, 4vw, 20px);
        }

        .badge-text {
            color: var(--light-text);
            font-size: clamp(12px, 3vw, 14px);
            text-shadow: 0 3px 0 var(--dark-accent);
            line-height: 1.3;
        }

        /* Confetti */
        .confetti {
            position: fixed;
            width: 8px;
            height: 8px;
            opacity: 0;
            z-index: 1;
            pointer-events: none;
            animation: confettiFall 5s linear forwards;
            image-rendering: pixelated;
        }

        /* Gemstone confetti */
        .gem-confetti {
            position: fixed;
            font-size: clamp(16px, 4vw, 24px);
            opacity: 0;
            z-index: 1;
            pointer-events: none;
            animation: confettiFall 5s linear forwards;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            filter: drop-shadow(0 0 4px rgba(255, 255, 255, 0.7));
        }

        @keyframes confettiFall {
            0% {
                transform: translateY(-100px) rotate(0deg) scale(1);
                opacity: 1;
            }

            100% {
                transform: translateY(100vh) rotate(720deg) scale(0.5);
                opacity: 0;
            }
        }

        /* Pixel Explosion */
        @keyframes pixel-explode {
            0% {
                transform: translate(0, 0) scale(1);
                opacity: 1;
            }

            100% {
                transform: translate(var(--x), var(--y)) scale(0);
                opacity: 0;
            }
        }

        /* Pixel Loader Animation */
        .pixel-loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--darker-accent);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            animation: fadeOut 0.5s 3s forwards;
        }

        .loader-grid {
            display: flex;
            flex-direction: column;
            gap: 4px;
            margin-bottom: 20px;
        }

        .loader-row {
            display: flex;
            gap: 4px;
        }

        .loader-pixel {
            width: 16px;
            height: 16px;
            background: var(--primary-color);
            animation: pixelPulse 1.5s infinite;
            animation-delay: calc(var(--pixel-index) * 0.05s);
            opacity: 0;
        }

        .loader-text {
            font-family: 'Press Start 2P', cursive;
            color: var(--secondary-color);
            font-size: 12px;
            text-shadow: 0 2px 0 var(--dark-accent);
            animation: textGlow 1s infinite alternate;
        }

        @keyframes pixelPulse {

            0%,
            100% {
                opacity: 0.2;
                transform: scale(0.8);
            }

            50% {
                opacity: 1;
                transform: scale(1.1);
                background: var(--secondary-color);
            }
        }

        @keyframes textGlow {
            from {
                opacity: 0.7;
                text-shadow: 0 0 5px var(--secondary-color);
            }

            to {
                opacity: 1;
                text-shadow: 0 0 10px var(--secondary-color), 0 0 20px var(--secondary-color);
            }
        }

        @keyframes fadeOut {
            to {
                opacity: 0;
                visibility: hidden;
            }
        }

        /* Very small screens adjustments */
        @media (max-width: 400px) {
            .birthday-title {
                font-size: 12px;
                line-height: 1.3;
                gap: 5px;
            }

            .cake-icon {
                font-size: 36px;
                margin-bottom: 5px;
            }

            .game-button {
                height: 50px;
                font-size: 10px;
                min-width: 140px;
            }

            .notification-buttons {
                flex-direction: column;
                align-items: center;
            }

            .notification-btn {
                max-width: 100%;
                width: 100%;
                min-height: 36px;
                font-size: 10px;
            }

            .game-notification {
                padding: 15px;
            }

            .notification-content {
                font-size: 11px;
                line-height: 1.4;
            }
        }

        /* Small height screens */
        @media (max-height: 600px) {
            .content-container {
                transform: scale(0.9);
            }

            .cake-icon {
                margin-bottom: 5px;
            }

            .birthday-title {
                margin-bottom: 5px;
            }

            .notification-content {
                font-size: 11px;
                line-height: 1.4;
                max-height: 30vh;
            }

            .celebrant-image-container {
                max-height: 20vh;
            }
        }

        /* Landscape orientation adjustments */
        @media (orientation: landscape) and (max-height: 500px) {
            .content-container {
                flex-direction: row;
                gap: 15px;
                transform: scale(0.8);
            }

            .cake-icon {
                margin-bottom: 0;
                font-size: 40px;
            }

            .birthday-title {
                margin-bottom: 0;
                text-align: left;
                font-size: 14px;
                gap: 5px;
            }

            .game-button {
                width: 160px;
                height: 60px;
                font-size: 10px;
            }

            .health-container,
            .score-display,
            .level-display {
                transform: scale(0.8);
                transform-origin: top left;
            }

            .notification-content {
                font-size: 10px;
                line-height: 1.3;
            }
        }

        /* Touch device specific styles */
        @media (hover: none) {
            .game-button:hover {
                background: var(--dark-accent);
                transform: translate(0, 0);
                box-shadow:
                    4px 4px 0 rgba(0, 0, 0, 0.3),
                    inset 0 0 0 2px var(--dark-accent);
            }

            .game-button:active {
                background: var(--primary-color);
                transform: translate(4px, 4px);
                box-shadow:
                    0px 0px 0 rgba(0, 0, 0, 0.3),
                    inset 0 0 0 2px var(--dark-accent);
            }

            .notification-btn:hover {
                background: var(--dark-accent);
                transform: translate(0, 0);
                box-shadow:
                    4px 4px 0 rgba(0, 0, 0, 0.3),
                    inset 0 0 0 2px var(--dark-accent);
            }

            .notification-btn:active {
                background: var(--primary-color);
                transform: translate(4px, 4px);
                box-shadow:
                    0px 0px 0 rgba(0, 0, 0, 0.3),
                    inset 0 0 0 2px var(--dark-accent);
            }
        }
    </style>
    <link href="https://fonts.googleapis.com/css?family=Press+Start+2P" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>
    <!-- Pixelated Opening Animation -->
    <div class="pixel-loader" id="pixelLoader">
        <div class="loader-grid">
            <div class="loader-row">
                <div class="loader-pixel" style="--pixel-index: 0"></div>
                <div class="loader-pixel" style="--pixel-index: 1"></div>
                <div class="loader-pixel" style="--pixel-index: 2"></div>
                <div class="loader-pixel" style="--pixel-index: 3"></div>
                <div class="loader-pixel" style="--pixel-index: 4"></div>
                <div class="loader-pixel" style="--pixel-index: 5"></div>
                <div class="loader-pixel" style="--pixel-index: 6"></div>
                <div class="loader-pixel" style="--pixel-index: 7"></div>
            </div>
            <div class="loader-row">
                <div class="loader-pixel" style="--pixel-index: 8"></div>
                <div class="loader-pixel" style="--pixel-index: 9"></div>
                <div class="loader-pixel" style="--pixel-index: 10"></div>
                <div class="loader-pixel" style="--pixel-index: 11"></div>
                <div class="loader-pixel" style="--pixel-index: 12"></div>
                <div class="loader-pixel" style="--pixel-index: 13"></div>
                <div class="loader-pixel" style="--pixel-index: 14"></div>
                <div class="loader-pixel" style="--pixel-index: 15"></div>
            </div>
            <div class="loader-row">
                <div class="loader-pixel" style="--pixel-index: 16"></div>
                <div class="loader-pixel" style="--pixel-index: 17"></div>
                <div class="loader-pixel" style="--pixel-index: 18"></div>
                <div class="loader-pixel" style="--pixel-index: 19"></div>
                <div class="loader-pixel" style="--pixel-index: 20"></div>
                <div class="loader-pixel" style="--pixel-index: 21"></div>
                <div class="loader-pixel" style="--pixel-index: 22"></div>
                <div class="loader-pixel" style="--pixel-index: 23"></div>
            </div>
            <div class="loader-row">
                <div class="loader-pixel" style="--pixel-index: 24"></div>
                <div class="loader-pixel" style="--pixel-index: 25"></div>
                <div class="loader-pixel" style="--pixel-index: 26"></div>
                <div class="loader-pixel" style="--pixel-index: 27"></div>
                <div class="loader-pixel" style="--pixel-index: 28"></div>
                <div class="loader-pixel" style="--pixel-index: 29"></div>
                <div class="loader-pixel" style="--pixel-index: 30"></div>
                <div class="loader-pixel" style="--pixel-index: 31"></div>
            </div>
        </div>
        <div class="loader-text">LOADING ;)</div>
    </div>

    <!-- Pixel Grid Background -->
    <div class="pixel-waves"></div>
    <div class="pixel-grid"></div>

    <!-- Pixel Border Elements -->
    <div class="pixel-border pixel-border-top"></div>
    <div class="pixel-border pixel-border-bottom"></div>
    <div class="pixel-border pixel-border-left"></div>
    <div class="pixel-border pixel-border-right"></div>

    <!-- Main Content Container -->
    <div class="content-container">
        <!-- Birthday Title -->
        <div class="birthday-title">
            <span>Happy Birthday po</span>
            <span>Kapatid na</span>
            <span>GEM CHRISTIAN</span>
            <span>COPIA GUIMARY!</span>
        </div>
        <div class="cake-icon">🎂</div>

        <!-- Game Button -->
        <button class="game-button" id="gameButton">PRESS START<br>FOR BIRTHDAY WISHES</button>
    </div>

    <!-- Game UI Elements -->
    <div class="game-ui">
        <div class="health-container">
            <div class="health-bar">
                <div class="health-fill" id="healthFill"></div>
            </div>
            <div class="health-label" id="healthLabel">LIFE ENERGY: 0%</div>
        </div>
        <div class="score-display" id="scoreDisplay">MESSAGES: 0</div>
        <div class="level-display" id="levelDisplay">AGE: 21</div>
    </div>

    <!-- Achievement Badge -->
    <div class="achievement-badge" id="achievementBadge">
        <div class="badge-icon">🏆</div>
        <div class="badge-text">HBDWXYZ</div>
    </div>

    <!-- Game Notification -->
    <div class="game-notification" id="gameNotification">
        <div class="notification-header">
            <h2 class="notification-title">BIRTHDAY MESSAGE!</h2>
            <div class="notification-icon">🎉</div>
        </div>
        <div class="notification-main-content">
            <div class="scrollable-content">
                <div class="progress-display" id="progressDisplay">1/12</div>
                <div class="celebrant-image-container" id="celebrantImageContainer" style="display: none;">
                    <img src="assets/gems/wow.jpg" alt="Birthday Celebrant" class="celebrant-image">
                </div>
                <div class="notification-content" id="notificationContent">
                    CONGRATULATIONS! YOU'VE LEVELED UP IN LIFE! WISHING YOU AN AMAZING YEAR AHEAD FILLED WITH JOY,
                    SUCCESS,
                    AND PLENTY OF POWER-UPS!
                </div>
            </div>
            <div class="notification-buttons">
                <button class="notification-btn btn-accent" id="restartBtn">RESTART</button>
                <button class="notification-btn btn-next" id="nextBtn">NEXT</button>
            </div>
        </div>
    </div>

    <script>
        // Initialize loader pixels
        document.addEventListener('DOMContentLoaded', function () {
            const loader = document.getElementById('pixelLoader');
            setTimeout(() => {
                loader.remove();
            }, 3500);
        });

        const gameButton = document.getElementById('gameButton');
        const gameNotification = document.getElementById('gameNotification');
        const restartBtn = document.getElementById('restartBtn');
        const nextBtn = document.getElementById('nextBtn');
        const healthFill = document.getElementById('healthFill');
        const healthLabel = document.getElementById('healthLabel');
        const scoreDisplay = document.getElementById('scoreDisplay');
        const levelDisplay = document.getElementById('levelDisplay');
        const achievementBadge = document.getElementById('achievementBadge');
        const notificationContent = document.getElementById('notificationContent');
        const progressDisplay = document.getElementById('progressDisplay');
        const cakeIcon = document.querySelector('.cake-icon');
        const celebrantImageContainer = document.getElementById('celebrantImageContainer');
        const pixelWaves = document.querySelector('.pixel-waves');

        // Updated Birthday State
        let birthdayState = {
            lifeEnergy: 0,
            age: 21,
            messagesReceived: 0,
            currentMessageIndex: 0,
            messages: [
                { text: "Mula po sa pamilya ng mga bumbilya, kami po ay bumabati nga happy happy birthday po sa aming butihing tagasubaybay a.k.a lookout (char!) 👀👀👀💅 -Ilaw Fam", showImage: false },
                { text: "HAPPY BIRTHDAY KUYA GEM! nawa'y ang araw na ito ay maging makasaysayan at hindi mo makakalimutang araw para sayo, mabuhay ka hanggang sa gusto at makuha mo na sana lahat nang devil fruit sa one piece at skin sa emel. -Vanjo", showImage: false },
                { text: "happy birthday ka. gem✨️✨️✨️ huwag sana mawala yung zestful attitude mo sa pagtuturo bilang mwa/future minister✨️✨️✨️ -Mafia", showImage: false },
                { text: "Happy happy birthday po Ka. Gem, wish you po more birthday to come and malusog na pangangatawan para patuloy ka pong Maka tupad pa sa mga tungkulin at gampanin niyo po -Waniwan", showImage: false },
                { text: "Maligayang kaarawan po, nawa'y mabuhay kayo hangga't gusto n'yo. At nawa'y mag bagong buhay na kayo, h'wag na po pumangatlo. Joke lang po...Hehehehe -Bebe", showImage: false },
                { text: "Happy Birthday po! -Kimy", showImage: false },
                { text: "Happy Birthday po boto na po ako sa inyo with heart -Ekang", showImage: false },
                { text: "Happy3x Birthday Ka Gem ILOVEYOU mahal na mahal kita xd mwua2x chup2x -Kuys Butog", showImage: false },
                { text: "Happy Birthday po, nawa'y sumulong pa kayo sa inyong karapatan -Butihing KSI", showImage: false },
                { text: "Happy Happy Birthday po Ka Gem, mabuhay ka po hangga't gusto mo -Madam", showImage: false },
                { text: "Happy Birthday Ka Gem now a name but soon a Legend -Tita Burns🔥", showImage: false },
                { text: "Happy Birthday po BASHER!!! sana h'wag ka na pong mang-bash char lang Happy birthday po ulit -Fei", showImage: false },
                { text: "Happy Birthday Kuya Gem! Wishing you all the best! -Kei", showImage: true }
            ],
            gemstones: ["💎", "💠"],
            energyPerMessage: 100 / 13, // Evenly distribute across all messages
            hasAgedUp: false
        };

        // Initialize birthday greeting
        function initBirthday() {
            updateBirthdayUI();
            setTimeout(() => {
                cakeIcon.style.animation = 'none';
                setTimeout(() => cakeIcon.style.animation = 'bounce 2s infinite, candleFlicker 0.5s infinite alternate', 10);
            }, 1000);
        }

        // Updated Update UI function
        function updateBirthdayUI() {
            healthFill.style.width = `${birthdayState.lifeEnergy}%`;
            healthLabel.textContent = `LIFE ENERGY: ${Math.round(birthdayState.lifeEnergy)}%`;
            scoreDisplay.textContent = `MESSAGES: ${birthdayState.messagesReceived}`;
            levelDisplay.textContent = `AGE: ${birthdayState.age} ${getAgeEmoji()}`;
        }

        // Age emoji (21 vs 22)
        function getAgeEmoji() {
            return birthdayState.age === 21 ? "🧑" : "🧔";
        }

        // Confetti effects
        function createConfetti() {
            // Reduce number of particles on mobile for better performance
            const isMobile = window.innerWidth <= 600;
            const particleCount = isMobile ? 30 : 60;

            for (let i = 0; i < particleCount; i++) {
                const gem = document.createElement('img');
                gem.className = 'gem-confetti';
                gem.src = `assets/gems/${['red1', 'red2', 'orange1', 'orange2', 'green1', 'green2', 'spark1', 'spark2'][Math.floor(Math.random() * 8)]}.png`;
                gem.style.left = Math.random() * 100 + 'vw';
                gem.style.top = '-30px';
                gem.style.animationDuration = (4 + Math.random() * 3) + 's';
                gem.style.animationDelay = Math.random() * 1.5 + 's';
                gem.style.width = isMobile ? '16px' : '24px';
                gem.style.height = isMobile ? '16px' : '24px';
                gem.style.position = 'fixed';
                gem.style.zIndex = '1';
                gem.style.imageRendering = 'pixelated';
                document.body.appendChild(gem);
                setTimeout(() => gem.remove(), 5000);
            }

            for (let i = 0; i < particleCount; i++) {
                const gem = document.createElement('div');
                gem.className = 'gem-confetti';
                gem.style.left = Math.random() * 100 + 'vw';
                gem.style.top = '-30px';
                gem.style.animationDuration = (4 + Math.random() * 3) + 's';
                gem.style.animationDelay = Math.random() * 1.5 + 's';
                gem.textContent = birthdayState.gemstones[Math.floor(Math.random() * birthdayState.gemstones.length)];
                gem.style.position = 'fixed';
                gem.style.zIndex = '1';
                gem.style.fontSize = (isMobile ? 12 : 20 + Math.random() * 20) + 'px';
                gem.style.transform = `rotate(${Math.random() * 360}deg) scale(${0.7 + Math.random() * 0.6})`;
                document.body.appendChild(gem);
                setTimeout(() => gem.remove(), 5000);
            }
        }

        // Pixel explosion effect
        function createPixelExplosion() {
            const colors = ['#ff85a2', '#ffd166', '#06d6a0', '#118ab2', '#ff85d8', '#ff66b3'];
            const isMobile = window.innerWidth <= 600;
            const particleCount = isMobile ? 25 : 50;

            for (let i = 0; i < particleCount; i++) {
                const pixel = document.createElement('div');
                pixel.className = 'pixel';
                pixel.style.left = '50%';
                pixel.style.top = '50%';
                pixel.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                pixel.style.position = 'fixed';
                pixel.style.zIndex = '1';
                const size = 4 + Math.floor(Math.random() * 3) * 4;
                pixel.style.width = `${size}px`;
                pixel.style.height = `${size}px`;
                const angle = Math.random() * Math.PI * 2;
                const distance = 50 + Math.random() * 100;
                const x = Math.cos(angle) * distance;
                const y = Math.sin(angle) * distance;
                pixel.style.animation = `pixel-explode ${0.5 + Math.random()}s forwards`;
                pixel.style.setProperty('--x', `${x}px`);
                pixel.style.setProperty('--y', `${y}px`);
                document.body.appendChild(pixel);
                setTimeout(() => pixel.remove(), 1000);
            }
        }

        // Achievement badge
        function showAchievement() {
            achievementBadge.classList.add('active');
            setTimeout(() => achievementBadge.classList.remove('active'), 7000);
        }

        // Updated Show Message function
        function playMessage(index) {
            const message = birthdayState.messages[index];
            notificationContent.textContent = message.text;
            progressDisplay.textContent = `${index + 1}/${birthdayState.messages.length}`;

            // Hide next button on final message
            if (index === birthdayState.messages.length - 1) {
                nextBtn.style.display = 'none';
            } else {
                nextBtn.style.display = 'flex';
            }

            if (message.showImage) {
                celebrantImageContainer.style.display = 'flex';
                gameNotification.classList.add('has-image');
                showAchievement();
            } else {
                celebrantImageContainer.style.display = 'none';
                gameNotification.classList.remove('has-image');
            }
        }

        // Updated Next Message function
        function showNextMessage() {
            birthdayState.currentMessageIndex = (birthdayState.currentMessageIndex + 1) % birthdayState.messages.length;
            playMessage(birthdayState.currentMessageIndex);

            // Increase life energy with each message
            birthdayState.lifeEnergy = Math.min(100, birthdayState.lifeEnergy + birthdayState.energyPerMessage);
            birthdayState.messagesReceived++;

            // Check for level up (when reaching the final message)
            if (birthdayState.currentMessageIndex === birthdayState.messages.length - 1 && !birthdayState.hasAgedUp) {
                birthdayState.age = 22;
                birthdayState.hasAgedUp = true;
                showAchievement();
                createConfetti();
            }

            updateBirthdayUI();
            createConfetti();
        }

        // Reset experience (including age)
        function resetExperience() {
            gameNotification.classList.remove('active');
            birthdayState.currentMessageIndex = 0;
            birthdayState.lifeEnergy = 0;
            birthdayState.messagesReceived = 0;
            birthdayState.age = 21; // Reset to 21
            birthdayState.hasAgedUp = false; // Reset age-up flag
            updateBirthdayUI();
            pixelWaves.classList.remove('static');
        }

        // Button click: Start filling life energy
        gameButton.addEventListener('click', () => {
            pixelWaves.classList.add('static');
            createPixelExplosion();

            // Start filling life energy
            birthdayState.lifeEnergy += birthdayState.energyPerMessage;
            birthdayState.messagesReceived++;
            updateBirthdayUI();

            setTimeout(() => {
                playMessage(birthdayState.currentMessageIndex);
                createConfetti();
                setTimeout(() => gameNotification.classList.add('active'), 100);
            }, 400);
        });

        // Event listeners
        restartBtn.addEventListener('click', resetExperience);
        nextBtn.addEventListener('click', showNextMessage);

        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space' || e.code === 'Enter') gameButton.click();
        });

        // Initialize on first interaction
        document.addEventListener('click', function initOnInteraction() {
            initBirthday();
            document.removeEventListener('click', initOnInteraction);
        }, { once: true });

        window.addEventListener('resize', () => {
            if (gameNotification.classList.contains('active')) {
                gameNotification.style.left = '50%';
                gameNotification.style.top = '50%';
                gameNotification.style.transform = 'translate(-50%, -50%) scale(1)';
            }
        });
    </script>
</body>

</html>